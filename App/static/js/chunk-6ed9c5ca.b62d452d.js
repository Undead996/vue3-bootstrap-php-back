(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ed9c5ca"],{"04d1":function(e,t,a){var n=a("342f"),c=n.match(/firefox\/(\d+)/i);e.exports=!!c&&+c[1]},"064d":function(e,t,a){"use strict";a("b0c0");var n=a("7a23"),c=["id"],o=["id"],l={class:"c-arrow"},i={key:0,ref:"o_cont",class:"input-container-select-options"},r=["onClick"];function s(e,t,a,s,d,u){var p=this;return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{ref:"s_cont",id:a.id+"_s",class:Object(n["normalizeClass"])([{disable:this.disable},"input-container form-control"]),tabindex:"-1",onClick:t[0]||(t[0]=function(e){return p.showOpt()})},[Object(n["createElementVNode"])("div",{class:"input-container-select",id:a.id},[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(["input-container-select-value",{grey:this.name.g}])},Object(n["toDisplayString"])(d.name.n),3),Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])({"bi bi-chevron-down":!d.showOptions,"bi bi-chevron-up":d.showOptions})},null,2)])],8,o),Object(n["createVNode"])(n["Transition"],{onEnter:u.enter,onLeave:u.leave},{default:Object(n["withCtx"])((function(){return[d.showOptions&&!a.disable?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",i,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(p.keywords,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["input-container-select-options-li",{acted:p.value==e.code}]),key:e.code,onClick:function(){p.selectOption(e.code)}},[Object(n["createElementVNode"])("label",null,Object(n["toDisplayString"])(e.value),1)],10,r)})),128))],512)):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["onEnter","onLeave"])],10,c)}a("4e82"),a("d3b7"),a("159b");var d=a("cffa"),u={data:function(){return{value:this.dataValue?this.dataValue:"",showOptions:!1,name:this.dataValue?this.getOption(this.dataValue):""}},props:{id:[String,Boolean],keywords:[Array],dataValue:[String,Boolean],disable:{default:!1,type:[Boolean]}},beforeUnmount:function(){document.querySelector("body").removeEventListener("click",this.clickClose)},methods:{setValue:function(){this.$emit("updateParentState",{id:this.id,value:this.value})},sortArr:function(){var e=this,t=this.keywords;t.sort((function(t,a){return t.code!=e.value&&a.code!=e.value?0:t.code==e.value&&a.code!=e.value?-1:t.code!=e.value&&a.code==e.value?1:void 0})),console.log(t)},showOpt:function(){if(this.disable)return this.showOptions=!1,void document.querySelector("body").removeEventListener("click",this.clickClose);this.showOptions=!this.showOptions,this.showOptions?this.$refs.s_cont.focus():this.$refs.s_cont.blur(),document.querySelector("body").addEventListener("click",this.clickClose)},clickClose:function(e){this.$el.contains(e.target)||(this.showOptions=!1,document.querySelector("body").removeEventListener("click",this.clickClose))},enter:function(e){d["a"].fromTo(e,{opacity:.6,height:"50%",duration:.2},{opacity:1,height:"auto",duration:.2})},leave:function(e,t){d["a"].fromTo(e,{opacity:1},{opacity:.6,height:0,duration:.1,onComplete:t})},getOption:function(e){var t={};return this.keywords.forEach((function(a){a.code==e&&(a.place?t.g=!0:t.g=!1,t.n=a.value)})),t},selectOption:function(e){this.name=this.getOption(e),this.value=e,this.setValue()}}},p=(a("c534"),a("6b0d")),b=a.n(p);const h=b()(u,[["render",s],["__scopeId","data-v-ed5cecde"]]);t["a"]=h},"0ceb":function(e,t,a){"use strict";var n=a("7a23"),c=["id"],o=["for"];function l(e,t,a,l,i,r){var s=this;return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])(["form-check form-control-lg form-switch",this.type])},[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",role:"switch",id:a.id,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.value=e}),onInput:t[1]||(t[1]=function(){return s.setValue&&s.setValue.apply(s,arguments)})},null,40,c),[[n["vModelCheckbox"],this.value]]),Object(n["createElementVNode"])("label",{class:"form-check-label",for:a.id},Object(n["toDisplayString"])(this.label?this.label:""),9,o)],2)}var i={data:function(){return{value:this.dataValue?this.dataValue:""}},props:{id:[String,Boolean],label:[String,Boolean],dataValue:[String,Boolean],type:{default:"form-switch-xl",type:[String]}},methods:{setValue:function(){this.value=!this.value,this.$emit("updateParentState",{id:this.id,value:this.value})}}},r=(a("3eef"),a("6b0d")),s=a.n(r);const d=s()(i,[["render",l]]);t["a"]=d},"159b":function(e,t,a){var n=a("da84"),c=a("fdbc"),o=a("785a"),l=a("17c2"),i=a("9112"),r=function(e){if(e&&e.forEach!==l)try{i(e,"forEach",l)}catch(t){e.forEach=l}};for(var s in c)c[s]&&r(n[s]&&n[s].prototype);r(o)},"17c2":function(e,t,a){"use strict";var n=a("b727").forEach,c=a("a640"),o=c("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"399f":function(e,t,a){},"3eef":function(e,t,a){"use strict";a("f3bc")},"4e82":function(e,t,a){"use strict";var n=a("23e7"),c=a("e330"),o=a("59ed"),l=a("7b0b"),i=a("07fa"),r=a("577e"),s=a("d039"),d=a("addb"),u=a("a640"),p=a("04d1"),b=a("d998"),h=a("2d00"),m=a("512c"),f=[],O=c(f.sort),j=c(f.push),v=s((function(){f.sort(void 0)})),k=s((function(){f.sort(null)})),V=u("sort"),g=!s((function(){if(h)return h<70;if(!(p&&p>3)){if(b)return!0;if(m)return m<603;var e,t,a,n,c="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(n=0;n<47;n++)f.push({k:t+n,v:a})}for(f.sort((function(e,t){return t.v-e.v})),n=0;n<f.length;n++)t=f[n].k.charAt(0),c.charAt(c.length-1)!==t&&(c+=t);return"DGBEFHACIJK"!==c}})),E=v||!k||!V||!g,_=function(e){return function(t,a){return void 0===a?-1:void 0===t?1:void 0!==e?+e(t,a)||0:r(t)>r(a)?1:-1}};n({target:"Array",proto:!0,forced:E},{sort:function(e){void 0!==e&&o(e);var t=l(this);if(g)return void 0===e?O(t):O(t,e);var a,n,c=[],r=i(t);for(n=0;n<r;n++)n in t&&j(c,t[n]);d(c,_(e)),a=c.length,n=0;while(n<a)t[n]=c[n++];while(n<r)delete t[n++];return t}})},"512c":function(e,t,a){var n=a("342f"),c=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!c&&+c[1]},addb:function(e,t,a){var n=a("4dae"),c=Math.floor,o=function(e,t){var a=e.length,r=c(a/2);return a<8?l(e,t):i(e,o(n(e,0,r),t),o(n(e,r),t),t)},l=function(e,t){var a,n,c=e.length,o=1;while(o<c){n=o,a=e[o];while(n&&t(e[n-1],a)>0)e[n]=e[--n];n!==o++&&(e[n]=a)}return e},i=function(e,t,a,n){var c=t.length,o=a.length,l=0,i=0;while(l<c||i<o)e[l+i]=l<c&&i<o?n(t[l],a[i])<=0?t[l++]:a[i++]:l<c?t[l++]:a[i++];return e};e.exports=o},b64b:function(e,t,a){var n=a("23e7"),c=a("7b0b"),o=a("df75"),l=a("d039"),i=l((function(){o(1)}));n({target:"Object",stat:!0,forced:i},{keys:function(e){return o(c(e))}})},c46c:function(e,t,a){"use strict";a.r(t);a("b64b"),a("d3b7"),a("25f0");var n=a("7a23"),c={class:""},o=Object(n["createElementVNode"])("div",{class:"row container-fluid g-3 p-0"},[Object(n["createElementVNode"])("h5",null,"Настройка доступа по IP-адресу не позволит Вам (или злоумышленнику) работать с системой с адреса, не прописанного в списке разрешённых.")],-1),l={class:"row container-fluid p-0 g-3"},i={key:0},r=Object(n["createElementVNode"])("div",{class:"main-title container-fluid p-0"},[Object(n["createElementVNode"])("h1",null,"Добавить адреса")],-1),s={class:"content p-4"},d={class:"input-group mt-2 g-3 p-0 input"},u=Object(n["createElementVNode"])("div",{class:"col-lg-3 col-sm-2 col-12"},[Object(n["createElementVNode"])("label",{class:"col-form-label input-label"},"Адрес: ")],-1),p={class:"col-lg-7 col-sm-8 col-12 pr-1 input-wrapper"},b={key:0,class:"invalid-feedback"},h={class:"input-group mt-3 g-3 p-0 input"},m=Object(n["createElementVNode"])("div",{class:"col-lg-3 col-sm-2 col-12"},[Object(n["createElementVNode"])("label",{class:"col-form-label input-label"},"Блок адресов: ")],-1),f={class:"row m-0 col-lg-7 col-sm-8 col-12 pr-1"},O=Object(n["createElementVNode"])("label",{class:"col-form-label col-1 pl-0 input-label text-end"},"c:",-1),j={class:"col input-wrapper"},v={key:0,class:"invalid-feedback"},k=Object(n["createElementVNode"])("label",{class:"col-form-label col-1 pl-0 input-label text-end"},"по:",-1),V={class:"col pr-0 input-wrapper"},g={key:0,class:"invalid-feedback"},E={class:"input-group mt-3 g-3 p-0 align-items-center input"},_=Object(n["createElementVNode"])("div",{class:"col-lg-3 col-sm-2 col-12"},[Object(n["createElementVNode"])("label",{class:"col-form-label input-label"},"Свой IP: ")],-1),w={class:"col-lg-7 col-sm-8 col-12 input-wrapper"},N=Object(n["createElementVNode"])("div",{class:"main-title container-fluid p-0"},[Object(n["createElementVNode"])("h1",null,"Список адресов")],-1),y={key:0,class:"content p-4 table-responsive"},S={class:"table table-borderless table-striped"},C=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{scope:"col"},"№"),Object(n["createElementVNode"])("th",{scope:"col"},"С адреса"),Object(n["createElementVNode"])("th",{scope:"col"},"По адрес"),Object(n["createElementVNode"])("th",{scope:"col"},"Доступ"),Object(n["createElementVNode"])("th",{class:"text-end",scope:"col"},"Действия")])],-1),B={key:0},I={class:"align-middle",scope:"col"},x={class:"align-middle",scope:"col"},P={class:"align-middle",scope:"col"},z={class:"align-middle",scope:"col"},D={class:"align-middle text-end",scope:"col"},U={key:1},$=Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("td",{colspan:"5"},"Адреса отсутствуют")],-1),A=[$],L={class:"row container-fluid g-3 align-items-center justify-content-center input"},T={class:"col-sm-2"};function F(e,t,a,$,F,q){var G=this,J=Object(n["resolveComponent"])("SwitchSimple"),M=Object(n["resolveComponent"])("InputSimple"),K=Object(n["resolveComponent"])("Button"),H=Object(n["resolveComponent"])("SelectSimple");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createElementVNode"])("div",null,[o,Object(n["createElementVNode"])("div",l,[this.data.ip_data?(Object(n["openBlock"])(),Object(n["createBlock"])(J,{key:0,class:"pl-4",label:"Ограничение доступа к кабинету по IP-адресам",dataValue:this.data.ip_status,type:"form-switch-xl",id:"ip_status",onUpdateParentState:this.updateState},null,8,["dataValue","onUpdateParentState"])):Object(n["createCommentVNode"])("",!0)])]),this.data.ip_status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[r,Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",d,[u,Object(n["createElementVNode"])("div",p,[Object(n["createVNode"])(M,{id:"add_ip",class:Object(n["normalizeClass"])({invalid:this.warn.ip}),onUpdateParentState:this.addValue},null,8,["class","onUpdateParentState"]),this.warn.ip?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,Object(n["toDisplayString"])(this.warn.ip),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["col-lg-1 col-sm-1 col-12 input-wrapper text-end",{btn_mb:this.$store.state.resize.w<576}])},[Object(n["createVNode"])(K,{name:"Добавить",type:"btn-outline-warning",onClick:t[0]||(t[0]=function(){G.addNewIp(G.add_ip)})})],2)]),Object(n["createElementVNode"])("div",h,[m,Object(n["createElementVNode"])("div",f,[O,Object(n["createElementVNode"])("div",j,[Object(n["createVNode"])(M,{id:"addr_start",class:Object(n["normalizeClass"])({invalid:this.warn.start}),onUpdateParentState:this.addGroupValue},null,8,["class","onUpdateParentState"]),this.warn.start?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",v,Object(n["toDisplayString"])(this.warn.start),1)):Object(n["createCommentVNode"])("",!0)]),k,Object(n["createElementVNode"])("div",V,[Object(n["createVNode"])(M,{id:"addr_end",class:Object(n["normalizeClass"])({invalid:this.warn.end}),onUpdateParentState:this.addGroupValue},null,8,["class","onUpdateParentState"]),this.warn.end?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",g,Object(n["toDisplayString"])(this.warn.end),1)):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["col-lg-1 col-sm-1 col-12 input-wrapper text-end",{btn_mb:this.$store.state.resize.w<576}])},[Object(n["createVNode"])(K,{name:"Добавить",type:"btn-outline-warning",onClick:t[1]||(t[1]=function(){G.addNewIps(G.group_ip)})})],2)]),Object(n["createElementVNode"])("div",E,[_,Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(this.self_ip),1)]),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["col-lg-1 col-sm-1 col-12 input-wrapper text-end",{btn_mb:this.$store.state.resize.w<576}])},[Object(n["createVNode"])(K,{name:"Добавить",type:"btn-outline-warning",onClick:t[2]||(t[2]=function(){G.addNewIp(G.self_ip)})})],2)])]),N,this.data.ip_status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",y,[Object(n["createElementVNode"])("table",S,[C,Object.keys(this.data.ip_data).length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tbody",B,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(this.data.ip_data,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.index},[Object(n["createElementVNode"])("td",I,Object(n["toDisplayString"])(t),1),Object(n["createElementVNode"])("td",x,Object(n["toDisplayString"])(e.addr_start),1),Object(n["createElementVNode"])("td",P,Object(n["toDisplayString"])(e.addr_end),1),Object(n["createElementVNode"])("td",z,[Object(n["createVNode"])(H,{dataValue:e.enable,id:t.toString(),keywords:G.keywords,onUpdateParentState:G.setSelectValue},null,8,["dataValue","id","keywords","onUpdateParentState"])]),Object(n["createElementVNode"])("td",D,[Object(n["createVNode"])(K,{name:"Удалить",type:"btn-outline-warning btn-sm",onClick:function(){G.delValue(t)}},null,8,["onClick"])])])})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("tbody",U,A))])])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",L,[Object(n["createElementVNode"])("div",T,[Object(n["createVNode"])(K,{name:"Сохранить",type:"btn-warning btn-lg",onClick:this.confirmSettings},null,8,["onClick"])])])])}a("ac1f"),a("1276");var q=a("fada"),G=a("bab6"),J=a("0ceb"),M=a("064d"),K=a("c662"),H=a("41d0"),W={components:{Input:q["a"],Button:G["a"],SwitchSimple:J["a"],SelectSimple:M["a"],InputSimple:K["a"]},data:function(){return{data:{ip_status:!1,ip_data:!1},self_ip:"",add_ip:"",group_ip:{addr_start:"",addr_end:""},warn:{ip:!1,start:!1,end:!1},keywords:[{code:"0",value:"Запретить"},{code:"1",value:"Разрешить"}],ready:!1}},methods:{setSelectValue:function(e){this.data.ip_data[e.id].enable=e.value},addValue:function(e){this.add_ip=e.value},addGroupValue:function(e){this.group_ip[e.id]=e.value},delValue:function(e){delete this.data.ip_data[e]},addNewIp:function(e){this.checkIp(e,"ip")&&(Object.keys(this.data.ip_data).length?this.data.ip_data[Object.keys(this.data.ip_data).length+1]={addr_start:e,addr_end:e,enable:"1"}:this.data.ip_data={1:{addr_start:e,addr_end:e,enable:"1"}})},addNewIps:function(e){this.checkIp(e["addr_start"],"start")&&this.checkIp(e["addr_end"],"end")&&(Object.keys(this.data.ip_data).length?this.data.ip_data[Object.keys(this.data.ip_data).length+1]={addr_start:e["addr_start"],addr_end:e["addr_end"],enable:"1"}:this.data.ip_data={1:{addr_start:e["addr_start"],addr_end:e["addr_end"],enable:"1"}})},confirmSettings:function(){if(this.checkForm()){var e={status:"1",ip_access:this.CreateIpString()};this.axios.post("setAccessIpStatus",{data:e})}},updateState:function(e){this.data[e.id]=e.value},CreateIpString:function(){var e=new String,t=Object.keys(this.data.ip_data);this.data.ip_status||(e+="0.0.0.0-255.255.255.255:1",t.length>0&&(e+=";"));for(var a=0;a<t.length;a++)e+=this.data.ip_data[t[a]].addr_start,this.data.ip_data[t[a]].addr_start!=this.data.ip_data[t[a]].addr_end&&(e+="-"+this.data.ip_data[t[a]].addr_end),e+=":"+this.data.ip_data[t[a]].enable.toString(),a!=t.length-1&&(e+=";");return e},checkIp:function(e,t){return""==e?(this.warn[t]="Введите IP-адрес",!1):this.isCorrectIP(e)?(this.warn[t]=!1,!0):(this.warn[t]="IP-адрес введен неверно",!1)},isCorrectIP:function(e){if(null==e||""==e)return!1;var t=e.split(".");if(4!=t.length)return!1;for(var a=0;a<t.length;a++){if(!H["a"].isInt(t[a]))return!1;if(parseInt(t[a])<0||parseInt(t[a])>255)return!1}return!0},checkForm:function(){if(this.data.ip_status){var e=Object.keys(this.data.ip_data);if(e.length<=0)return H["a"].alertE(this.$store,{result:"1",result_text:"Не указан ни один IP-адрес или блок адресов."}),!1;for(var t=0,a=0;a<e.length;a++)"1"==this.data.ip_data[e[a]].enable&&(t+=1);if(t<=0)return H["a"].alertE(this.$store,{result:"1",result_text:"Ни один IP-адрес не разрешен для авторизации. Вы не сможете получить доступ к своему счету."}),!1}return!0}},created:function(){var e=this;this.$store.commit("TITLE","Доступ по IP"),this.axios.post("getAccessIpStatus").then((function(t){e.data.ip_data=t.data.body[1],e.data.ip_status=t.data.body[0],e.self_ip=t.data.body[2]}))}},Q=a("6b0d"),R=a.n(Q);const X=R()(W,[["render",F]]);t["default"]=X},c534:function(e,t,a){"use strict";a("399f")},d998:function(e,t,a){var n=a("342f");e.exports=/MSIE|Trident/.test(n)},f3bc:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6ed9c5ca.b62d452d.js.map